<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:maps="clr-namespace:Xamarin.Forms.Maps;assembly=Xamarin.Forms.Maps"
    x:Class="Puma.Views.MainPage"
    xmlns:local="clr-namespace:Puma.CustomRenderer;assembly=Puma"
    xmlns:viewmodel="clr-namespace:Puma.ViewModels"
    xmlns:control="clr-namespace:Puma.ControlTemplates"
    xmlns:ffimageloadingsvg="clr-namespace:FFImageLoading.Svg.Forms;assembly=FFImageLoading.Svg.Forms"
    BackgroundColor="{AppThemeBinding 
                              Dark={StaticResource WindowBackgroundColorDark}, 
                              Light={StaticResource WindowBackgroundColor}}">





    <AbsoluteLayout VerticalOptions="FillAndExpand" x:Name="mainStack" AbsoluteLayout.LayoutBounds="0.5,0.5,1,1" AbsoluteLayout.LayoutFlags="All">

        <StackLayout AbsoluteLayout.LayoutBounds="0,0,1,1" AbsoluteLayout.LayoutFlags="All" x:Name="main" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">
            <!-- MAP -->

            <maps:Map
            x:Name="map"
            MapClicked="OnMapClicked"
            Grid.RowSpan="12"
            Grid.ColumnSpan="12"
            MapType="Hybrid"
            Background="{AppThemeBinding
                              Dark={StaticResource WindowBackgroundColorDark}, 
                              Light={StaticResource WindowBackgroundColor}}"
            BackgroundColor="{AppThemeBinding 
                              Dark={StaticResource WindowBackgroundColorDark}, 
                              Light={StaticResource WindowBackgroundColor}}"
            AbsoluteLayout.LayoutFlags="All"
            AbsoluteLayout.LayoutBounds="0,0,1,1">

                <x:Arguments>
                    <maps:MapSpan>
                        <x:Arguments>
                            <maps:Position>
                                <x:Arguments>
                                    <x:Double>36.9628066</x:Double>
                                    <x:Double>-122.0194722</x:Double>
                                </x:Arguments>
                            </maps:Position>
                            <x:Double>111</x:Double>
                            <x:Double>111</x:Double>
                        </x:Arguments>
                    </maps:MapSpan>
                </x:Arguments>
            </maps:Map>

        </StackLayout>
                                                                        <!--Searchbar start-->
        <Grid AbsoluteLayout.LayoutBounds="0.5,0.1,.8,0.1" AbsoluteLayout.LayoutFlags="All">
           

            <StackLayout>
            <Frame
            Grid.Row="1"
            Grid.Column="0"
            Grid.ColumnSpan="12"
            Margin="5"
            BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
            Padding="0"
            CornerRadius="15"
            IsClippedToBounds="False"
            HorizontalOptions="CenterAndExpand"
            VerticalOptions="FillAndExpand"
            MinimumWidthRequest="500"
            WidthRequest="500"
            Opacity=".5">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup
                    x:Name="opa">
                    <VisualState
                        x:Name="Normal">
                        <VisualState.Setters>

                        </VisualState.Setters>
                    </VisualState>
                    <VisualState
                        x:Name="Focused">
                        <VisualState.Setters>
                            <Setter
                                Property="BackgroundColor"
                                Value="White"></Setter>
                            <Setter
                                Property="Opacity"
                                Value=".9"></Setter>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Grid
                HorizontalOptions="CenterAndExpand"
                WidthRequest="500"
                ColumnDefinitions="auto,auto">
                <local:RoundedEntry
                    Completed="PointerBt_Clicked"
                    Grid.Column="0"
                    HorizontalOptions="FillAndExpand"
                    VerticalOptions="FillAndExpand"
                    Grid.ColumnSpan="3"
                    x:Name="SearchField"
                    Placeholder="Where to ya scallywag?"
                    FontSize="20">
                </local:RoundedEntry>
                <ffimageloadingsvg:SvgCachedImage
                    Grid.Column="2"
                    VerticalOptions="Center"
                    HorizontalOptions="End"
                    HeightRequest="50"
                    WidthRequest="50"
                    Margin="0,0,20,0"
                    Source="resource://Puma.Resources.SearchIcon.svg">
                </ffimageloadingsvg:SvgCachedImage>

   

                <!--- TEST-->
                <local:CustomButton
                    HorizontalOptions="End"
                    BackgroundColor="red"
                    Grid.Column="2"
                    Opacity=".1"
                    Text="Testa maps"
                    Clicked="PointerBt_Clicked">
                </local:CustomButton>
            </Grid>
        </Frame>
            </StackLayout>
        </Grid>
                                                             <!--Search Bar End-->
        
        <!--Signup-->
        <Frame
            IsVisible="{Binding signupPopupState}"
            x:Name="signupPopup"
            Grid.Row="2"
            Grid.RowSpan="8"
            Grid.ColumnSpan="12"
            HorizontalOptions="CenterAndExpand"
            VerticalOptions="StartAndExpand"
            WidthRequest="320"
            MinimumHeightRequest="370"
            HeightRequest="500"
            BackgroundColor="{AppThemeBinding 
                              Dark={StaticResource PopUpBackgroundColorDark}, 
                              Light={StaticResource PopUpBackgroundColor}}"
            BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
            Opacity=".9">

            <!-- CLOSE POPUP / SIGNUP / LOGIN BUTTONS-->
            <Grid
                RowDefinitions="auto,.9*">
                <Grid
                    Grid.Row="0"
                    ColumnDefinitions="1*,1*,.2*"
                    RowDefinitions="auto,auto">
                    <local:CustomButton
                        Grid.Column="2"
                        Grid.Row="0"
                        VerticalOptions="StartAndExpand"
                        Margin="-10,-10,-10,0"
                        Command="{Binding ClosePopupCommand}"
                        CornerRadius="15"
                        BackgroundColor="{AppThemeBinding 
                                  Dark={StaticResource ButtonBackgroundColorDark}, 
                                  Light={StaticResource ButtonBackgroundColor}}"
                        BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
                        Text="X"
                        HorizontalOptions="EndAndExpand" />

                    <Grid
                        Grid.Row="0"
                        Grid.ColumnSpan="2">
                        <local:CustomButton
                            Command="{Binding OpenLoginCommand}"
                            CornerRadius="5"
                            Text="Log in"
                            FontSize="32"
                            Background="#55FFFFFF"
                            BorderColor="Transparent"
                            TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}">

                        </local:CustomButton>
                        <local:CustomButton
                            Grid.Column="1"
                            HorizontalOptions="FillAndExpand"
                            Command="{Binding OpenSignupCommand}"
                            CornerRadius="5"
                            Background="#77FFFFFF"
                            BorderColor="Transparent"
                            TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                            Text="Sign up"
                            FontSize="32"></local:CustomButton>
                        <Rectangle
                            Grid.Row="0"
                            Grid.Column="1"
                            HeightRequest="2"
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="End"
                            Background="black" />
                    </Grid>
                </Grid>


                <!-- SIGNUP INPUTS -->
                <ScrollView
                    Grid.Row="1">
                    <Grid
                        RowDefinitions="auto,auto,auto,auto,auto,auto,auto,auto,auto,auto"
                        ColumnSpacing="0"
                        x:Name="slCreateUserViewModel">

                        <Label
                            HeightRequest="13"
                            Grid.Row="0"
                            Margin="0"
                            Padding="0"
                            FontSize="13"
                            HorizontalTextAlignment="Center"
                            Text="{Binding EmailErrorMSG}"
                            TextColor="#C3FF0000" />
                        <control:EntryViewControl
                            Grid.Row="1"
                            EntryText="{Binding SignupEmail, Mode=TwoWay}"
                            PlaceholderText="Email"
                            ControlTemplate="{StaticResource EntryViewControlTemplate}" />


                        <Label
                            Grid.Row="2"
                            Margin="0"
                            Padding="0"
                            HeightRequest="12"
                            FontSize="12"
                            VerticalOptions="Start"
                            HorizontalTextAlignment="Center"
                            Text="{Binding PaaswordErrorMSG}"
                            TextColor="#C3FF0000" />
                        <control:EntryViewControl
                            Grid.Row="3"
                            IsPassword="True"
                            EntryText="{Binding SignupPassword, Mode=TwoWay}"
                            PlaceholderText="Password"
                            ControlTemplate="{StaticResource EntryViewControlTemplate}" />


                        <Label
                            Grid.Row="4"
                            Margin="0"
                            Padding="0"
                            FontSize="13"
                            HorizontalTextAlignment="Center"
                            Text="{Binding DisplayNameErrorMSG}"
                            TextColor="#C3FF0000" />
                        <control:EntryViewControl
                            Grid.Row="5"
                            EntryText="{Binding SignupDisplayName, Mode=TwoWay}"
                            PlaceholderText="Display Name"
                            ControlTemplate="{StaticResource EntryViewControlTemplate}" />


                        <Label
                            Grid.Row="6"></Label>
                        <control:EntryViewControl
                            Grid.Row="7"
                            EntryText="{Binding SignupFirstName, Mode=TwoWay}"
                            PlaceholderText="First name"
                            ControlTemplate="{StaticResource EntryViewControlTemplate}" />


                        <Label
                            Grid.Row="8"></Label>
                        <control:EntryViewControl
                            Grid.Row="9"
                            EntryText="{Binding SignupSurname, Mode=TwoWay}"
                            PlaceholderText="Surname"
                            ControlTemplate="{StaticResource EntryViewControlTemplate}" />


                        <local:CustomButton
                            HeightRequest="50"
                            WidthRequest="150"
                            VerticalOptions="Center"
                            Grid.Row="10"
                            Command="{Binding CreateUserCommand}"
                            CornerRadius="10"
                            BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
                            HorizontalOptions="Center"
                            BackgroundColor="{AppThemeBinding Dark={StaticResource ButtonBackgroundColorDark}, Light={StaticResource ButtonBackgroundColor}}"
                            TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                            Text="Sign up"
                            FontSize="20">
                        </local:CustomButton>
                    </Grid>
                </ScrollView>
            </Grid>


        </Frame>
        
        
        
         <!-- LOG IN POPUP -->

        <Frame
            x:Name="loginPopup"
            IsVisible="{Binding loginPopupState}"
            Grid.Row="2"
            Grid.RowSpan="8"
            Grid.ColumnSpan="12"
            HorizontalOptions="CenterAndExpand"
            VerticalOptions="StartAndExpand"
            WidthRequest="320"
            MinimumHeightRequest="370"
            BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark}, Light={StaticResource PopUpBackgroundColor}}"
            Opacity=".9">

            <!-- CLOSE POPUP / LOGIN / SIGNUP BUTTONS -->
            <Grid
                RowDefinitions="auto,.9*">

                <Grid
                    Grid.Row="0"
                    ColumnDefinitions="1*,1*,.2*"
                    RowDefinitions="auto,auto">
                    <local:CustomButton
                        Grid.Column="2"
                        Grid.Row="0"
                        VerticalOptions="StartAndExpand"
                        Margin="-10,-10,-10,0"
                        Command="{Binding ClosePopupCommand}"
                        CornerRadius="15"
                        BackgroundColor="{AppThemeBinding 
                                  Dark={StaticResource ButtonBackgroundColorDark}, 
                                  Light={StaticResource ButtonBackgroundColor}}"
                        BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
                        Text="X"
                        HorizontalOptions="EndAndExpand" />

                    <Grid
                        Grid.Row="0"
                        Grid.ColumnSpan="2">
                        <local:CustomButton
                            x:Name="btn_loginBtn"
                            Command="{Binding OpenLoginCommand}"
                            CornerRadius="5"
                            Text="Log in"
                            FontSize="32"
                            Background="#77FFFFFF"
                            BorderColor="Transparent"
                            TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}">
                        </local:CustomButton>
                        <local:CustomButton
                            Grid.Column="1"
                            HorizontalOptions="FillAndExpand"
                            Command="{Binding OpenSignupCommand}"
                            CornerRadius="5"
                            Background="#77FFFFFF"
                            BorderColor="Transparent"
                            TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                            Text="Sign up"
                            FontSize="32"></local:CustomButton>
                        <Rectangle
                            Grid.Row="0"
                            Grid.Column="0"
                            HeightRequest="2"
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="End"
                            Background="black" />
                    </Grid>

                </Grid>



                <!-- LOGIN INPUTS -->
                <ScrollView
                    Grid.Row="1">
                    <Grid
                        RowDefinitions="auto,auto,auto"
                        x:Name="slLogIn">
                        <control:EntryViewControl
                            Grid.Row="0"
                            EntryText="{Binding LoginEmail, Mode=TwoWay}"
                            PlaceholderText="Email"
                            ControlTemplate="{StaticResource EntryViewControlTemplate}" />
                        <control:EntryViewControl
                            Grid.Row="1"
                            IsPassword="True"
                            EntryText="{Binding LoginPassword, Mode=TwoWay}"
                            PlaceholderText="Password"
                            ControlTemplate="{StaticResource EntryViewControlTemplate}" />
                        <local:CustomButton
                            Grid.Row="2"
                            Command="{Binding LoginCommand}"
                            x:Name="btn_login"
                            CornerRadius="10"
                            HorizontalOptions="Center"
                            BackgroundColor="{AppThemeBinding Dark={StaticResource ButtonBackgroundColorDark}, Light={StaticResource ButtonBackgroundColor}}"
                            TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                            Text="Log in"
                            FontSize="20"></local:CustomButton>
                    </Grid>
                </ScrollView>
            </Grid>

        </Frame>

        
        
        
        
        <Frame
            x:Name="settingsPopup"
            IsVisible="{Binding settingsPopupState}"
            Grid.Row="2"
            Grid.RowSpan="8"
            Grid.ColumnSpan="12"
            HorizontalOptions="CenterAndExpand"
            VerticalOptions="CenterAndExpand"
            WidthRequest="320"
            MinimumHeightRequest="370"
            HeightRequest="500"
            BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark}, Light={StaticResource PopUpBackgroundColor}}"
            Opacity=".9">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition
                        Height="1*" />
                    <RowDefinition
                        Height="1*" />
                    <RowDefinition
                        Height="1*" />
                    <RowDefinition
                        Height="1*" />
                </Grid.RowDefinitions>
                <StackLayout
                    Spacing="15">
                    <local:CustomButton
                        Command="{Binding ClosePopupCommand}"
                        CornerRadius="15"
                        BackgroundColor="{AppThemeBinding 
                              Dark={StaticResource ButtonBackgroundColorDark}, 
                              Light={StaticResource ButtonBackgroundColor}}"
                        BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
                        TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                        Margin="0,-10,-10,-15"
                        Text="X"
                        HorizontalOptions="EndAndExpand"></local:CustomButton>
                    <Label
                        TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                        Text="Settings"
                        FontSize="32"
                        HorizontalOptions="Center" />
                    <Rectangle
                        HeightRequest="2"
                        HorizontalOptions="FillAndExpand"
                        Background="black" />
                    <Label
                        Text="LightMode"
                        TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"></Label>
                    <RadioButton
                        x:Name="themeRadioButtonLight"
                        HorizontalOptions="Center">
                    </RadioButton>
                    <Label
                        Text="DarkMode"
                        TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"></Label>
                    <RadioButton
                        x:Name="themeRadioButtonDark"
                        HorizontalOptions="Center">
                    </RadioButton>

                    <StackLayout
                        x:Name="slSettings">
                        <Rectangle
                            HeightRequest="2"
                            HorizontalOptions="FillAndExpand"
                            Background="black" />
                    </StackLayout>
                </StackLayout>
            </Grid>
        </Frame>
        
                                                                <!--Maps Type-->
        
        <Grid AbsoluteLayout.LayoutBounds="0,0.5,0.3,0.1" AbsoluteLayout.LayoutFlags="All">

            <StackLayout x:Name="slMapTypes">
                <local:CustomButton
                Clicked="ViewOptionButton_Clicked"
                BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark},
            Light={StaticResource PopUpBackgroundColor}}"
                Text="Satellite"></local:CustomButton>
            <local:CustomButton
                Clicked="ViewOptionButton_Clicked"
                BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark},
            Light={StaticResource PopUpBackgroundColor}}"
                Text="Hybrid"></local:CustomButton>
            <local:CustomButton
                Clicked="ViewOptionButton_Clicked"
                BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark},
            Light={StaticResource PopUpBackgroundColor}}"
                Text="Street"></local:CustomButton>
        </StackLayout>
        </Grid>




                                                        <!--visable side for slide panel-->
         <StackLayout x:Name="body" AbsoluteLayout.LayoutBounds="0,0,1,1" AbsoluteLayout.LayoutFlags="All"
            Orientation="Vertical" VerticalOptions="FillAndExpand" Spacing="0">
                   

            <Grid VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">
                <ContentView BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark},
                    Light={StaticResource PopUpBackgroundColor}}" Opacity="0.8" VerticalOptions="FillAndExpand" />
                <StackLayout>
                    <Grid>
                        <Grid.ColumnDefinitions 
                            BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark},
                                                              Light={StaticResource PopUpBackgroundColor}}">
                            <ColumnDefinition Width="*"/>  
                            <ColumnDefinition Width="2*"/>  
                            <ColumnDefinition Width="*"/>                            
                        </Grid.ColumnDefinitions>

                        
                        <!--Item left side navbar                Navbar Start-->
                        <StackLayout x:Name="slPoiPopover">
                            <Label
                        Grid.Row="0"
                        VerticalOptions="End"
                        HorizontalOptions="CenterAndExpand"
                        FontAttributes="Bold"
                        Text="{Binding Country}"
                        FontSize="18"></Label>
                        
                            <Label
                        VerticalOptions="StartAndExpand"
                        HorizontalOptions="CenterAndExpand"
                        Grid.Row="1"
                        x:Name="lbl_Country"
                        Text="{Binding Area}"
                        FontSize="13"></Label>
                        <Label
                        VerticalOptions="Start"
                        HorizontalOptions="CenterAndExpand"
                        Grid.Row="2"
                        Margin="0"
                        Text="{Binding StreetName}"
                        FontSize="12"></Label>
                            
                        </StackLayout>            
                        
                        
                        <!-- navbar logo-->
                        
                        <Grid
                            Grid.Column="1"
                            Grid.Row="0"
                            HorizontalOptions="Center"
                            AbsoluteLayout.LayoutBounds=".1,.1,.1,.1"
                            AbsoluteLayout.LayoutFlags="All">
                            <Path
                                Fill="#008db3"
                                Data="M58.4,22.7L60,42.7C55.8,54,44.8,62,32,62C15.4,62,2,48.6,2,32S15.4,2,32,2c6,0,11.6,1.8,16.3,4.8L58.4,22.7z" />
                            <Path
                                Fill="#ffc942"
                                Data="m48.3 6.8c.3 1 .6 2.1-.4 1.6-1.7-.9-3.9-1.9-3.2-1.2s1 1.5-.1 1.4c-1.1-.1-3.1-.4-4 .9-.9 1.3-2.1 1-2.4 1.5-.3.5-.8 2.6-1.7 1.9-.9-.6-2.7-2.9-1.2-2.3 1.5.6 3.2-.1 1.8-1.7-1.4-1.6-2.8-1-3.4-1.9-.6-.9-2.6-2-4.1.2-1.4 2.2-2.7 5.1-3.5 5.7-.8.6-2.5 1.7-2.2 2.6.2.9.3 3 1.2 2.4s1.4-.9 1.8-.3c.3.6.2 1.8.9 1.8 0 0 1.4-1 1.5-1.9.1-.9-1-1.4-.2-2.7s2.6-3.8 2.2-2.5c-.4 1.2-1.3 3-.6 3.8.6.8 4.1-.2 2.5.6-1.6.8-2.4 1.4-2.7 2.4-.3 1-.6 1.8-1.4 1.4s-1.8-.2-2.2-.2-.6-1.8-1.3-1.4c-.6.4.2 1.7-.5 1.8-.7.1-.8.9-1.6 1.5-.8.6-1.9 1.8-2.6 1.9s1.1 1 .8 1.8c-.3.9-1.9.8-2.5.9s-.1 1.3-.4 2c-.3.7.3 1.4 1.3 1.4 1 0 2-.2 2.1-1.1.1-.9 1-2.4 1.7-2.1.6.3 2.1-.6 2.4-.1.3.5 2.2 2.2 2 2.4s-1.3.7-.9.9c0 0 .3.5.5.4s.7-1.4 1-1.6.3-.9-.1-1.2c-.5-.3-2.2-1.5-1.8-2.1s1.3.7 1.7 1.1c.4.4 1 .9 1 1.8s.6.9.6 1.3c.1.5.3.6.8.6.5-.1.7-1.2.5-1.5-.3-.3-.3-.9.3-.9.6 0 1.3-.5 1.3-.8 0-.3.6-2.1 1-2.1s.7.7.8 1.1c.2.4 1.2-.3 1-.7-.2-.4.1-.5.4-.5.3 0 .1.8.3 1 .3.2 1.7 1.1 1.2 1.6s-1.2.2-1.7-.2c-.5-.4-1.8-.2-2.2.2-.3.4-.6.6-1.2.6-.6 0-.5 1.1 0 1.5.5.5 1.2.1 1.7.4.5.3 1.3-.4 1.4.1.1.5-.1 2-.6 2.1-.5.1-2.1.4-3.2-.1-1.2-.5-2.3-.7-2.4-.2-.1.6-.1 1-.9.5s-1.5-.8-2-.8c-.5 0-.5-.9-.4-1.6.1-.7-1.2-.5-2-.3s-2.4.7-3.4.7-1.4.2-1.6.6-1.1.4-1.1 1.2c0 .8.1 1-.7 1.4-.9.3-1.1 1.9-1.5 2.3-.4.4.4 1.4 0 2-.4.5-.8 1.9-.1 2.2.7.3 1.4 1.7 1.7 2.2.3.5 1.4 1 2.5.8 1.1-.2 3.1-.8 4.2-.3s2.2.4 1.7 1.4c-.6 1 .3 2.3 1 3 .7.7.5 2.5.1 3-.4.6-.3 1.6.1 2.1.4.5.6 1.7.6 2.1 0 .5.8 1.4.9 2.3.1 1-.6 2.1.3 2.1.9 0 3.2.1 3.4-.3s2-2 2.5-2.7 1.5-1.9 1.2-2.6c-.6-.5-.2-1 .8-1.4 1-.4 1-3.2.5-3.9-.5-.7.4-2.4 1.5-2.9 1.1-.5 3.7-5.1 2.9-4.7-.9.4-2.6.7-3.2.3-.6-.4-4.1-6.4-3.6-6.8s3.3 5.5 3.8 6.2c.5.8 5.2-2.1 5.8-2.8.5-.7-.3-1.4-.6-1.4s-1.4-.7-1.7-.3-2.3-2.9-1.6-2.6c.7.3 2.2 1.3 3.6 2.1s3-.5 3.9 1c1 1.5 1.6.5 1.5 1.2s1.2 3.6 1.7 4.5c.4.9 1.3-.4 1.4-1.4.1-1.1 2.2-2.8 3-3.4.7-.6 2.1.3 2.3 1.5.2 1.2 1.2-.2 1.2.7 0 1-.2 2.3.5 3.5 1.4-3.5 2.1-7 2.1-10.8 0-10.6-5.5-19.9-13.7-25.2" />
                            <Path
                                Data="m16.4 10.6c-.6.2-1.2.9-2 .5-.8-.4-2.5.2-1.4 1.1 1 1 .6 1.6 1.6 1.7s1.6-1.3 2.3-1.2.2-2.3-.5-2.1" />
                            <Path
                                Data="m40.7 49.7c-.7.1-.5 1.5-1.3 1.7-.7.2-.1.8-.5 1.3-.3.5-.5 1.7 0 2.3.5.7.7.7 1.3-.4.6-1 2-5 .5-4.9" />
                            <Path
                                Data="m20.6 17.3c-.3 0-.6.2-.9.2-.3.1-.5.5-.5.9 0 .5.8.6.5.9-.3.3-1.9.6-1.7 1.1s.5.9.2 1.4c-.3.5.3.6.9.4s1-.9.9-1.3c-.1-.5.9-.6.6-.2s-.8 1.4-.5 1.7c.3.3-.8.8-.4 1 .4.2 1.5-.8 2.1-.6s.8-.2.9-.7c.1-.6-.8-1.3-1.1-2-.3-.8-.1-2.8-1-2.8" />

                        </Grid>
                        
                        
                        <!--Puma title-->
                        <StackLayout
                Grid.Column="1"
                Orientation="Vertical"
                HorizontalOptions="Center">
                <Label
                    HorizontalOptions="Center"
                    HeightRequest="50"
                    Text="PuMap"
                    FontSize="40"
                    FontFamily="Lobster-Regular"></Label>
                     <Label
                    HorizontalOptions="Center"
                    Margin="-10"
                    Text="Travel for the people by the people"
                    FontSize="12"
                    FontFamily="Lobster-Regular"></Label>
                    </StackLayout>
                        
                        
                     <!--Login and Setting right side navbar-->
                        <StackLayout Grid.Column="2" VerticalOptions="CenterAndExpand" >
                            <Button Text="login" 
                                    x:Name="btn_Login_Popup"
                                    Command="{Binding OpenLoginCommand}"
                                    IsVisible="{Binding userLoginState}"
                                    BackgroundColor="{AppThemeBinding Dark={StaticResource PopUpBackgroundColorDark},
                                                        Light={StaticResource PopUpBackgroundColor}}"
                                    TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                                    BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"/>
                            
                            <Button  x:Name="btn_Logout"
                                        Command="{Binding LogOutCommand}"
                                        IsVisible="{Binding userLogoutState}"
                                        TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                                        BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
                                        Text="Log out" />
                                         <StackLayout>
                                            <!--Setting button-->
                    <Button x:Name="btn_Settings_Popup"
                    CornerRadius="15"
                    Command="{Binding OpenSettingsCommand}"
                    TextColor="{AppThemeBinding Dark={StaticResource TextColorDark}, Light={StaticResource TextColor}}"
                    BorderColor="{AppThemeBinding Dark={StaticResource BorderColorDark}, Light={StaticResource BorderColor}}"
                    Text="Settings"/>
                    </StackLayout>
                        </StackLayout>
                    </Grid>              
                    
                                                                <!--End Of Navbar-->
                    
                    
                                                                <!--Under Navbar Panel-->
        

                    <!--Button for point-->
                    <StackLayout Orientation="Horizontal"  HorizontalOptions="Center" x:Name="slPoiMenuButtons">
                        <Button Text="Add Point" ClassId="addPointBt" Clicked="PointerBt_Clicked"/>
                        <Button Text="Point of interest"  ClassId="pointInterestBt" Clicked="PointerBt_Clicked"/>
                        <Button Text="" ClassId="placeHolderBt" Clicked="PointerBt_Clicked"/>
                    </StackLayout>
       
                    

                    <!--stack for point all entry-->


                    <Grid>
                        <Grid.RowDefinitions>

                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>

                        </Grid.RowDefinitions>

                        <StackLayout Orientation="{OnPlatform UWP=Horizontal}" x:Name="addPointStack" Grid.Row="0">
                            <StackLayout HorizontalOptions="FillAndExpand" >
                                <local:RoundedEntry
                            TextColor="White"
                            PlaceholderColor="White"
                            BackgroundColor="Transparent"
                            x:Name="entry_Name"
                            Text="{Binding Name}"
                            FontSize="24"
                            Margin="0,0,0,10"
                            Placeholder="Name of Location.."
                            />

                                <local:CustomEditor
                            x:Name="entry_Description"
                            TextColor="White"
                            Text="{Binding Description}"
                            HeightRequest="250"
                            VerticalOptions="Center"
                            FontSize="24"
                            Placeholder="Description.."
                            PlaceholderColor="White"
                            BackgroundColor="Transparent"/>
                            </StackLayout>


                            <StackLayout HorizontalOptions="FillAndExpand">

                                <Picker
                        x:Name="TagPicker"
                        WidthRequest="10"
                        SelectedItem="{Binding SelectedTagInfo}"
                        ItemsSource="{Binding Tags}"
                        ItemDisplayBinding="{Binding Name}" />
                                <local:RoundedEntry
                        x:Name="entry_address"
                        Text="{Binding StreetName}"></local:RoundedEntry>
                                <local:RoundedEntry
                        TextColor="White"
 
                        x:Name="entry_zip"
                        Text="{Binding Area}"></local:RoundedEntry>
                                <local:RoundedEntry
                        TextColor="White"

                        x:Name="entry_country"
                        Text="{Binding Country}"></local:RoundedEntry>
                                <Button
                        x:Name="btn_SearchLocation"
                        Text="Search"
                        ></Button>
                                <Button
                        Text="Add Point of Interest"
                        Command="{Binding CreatePoiCommand}" />
                                <local:RoundedEntry
                        IsVisible="false"
                        x:Name="lbl_latitude"
                        Text="{Binding Latitude}"
                        FontSize="12"></local:RoundedEntry>
                                <local:RoundedEntry
                        IsVisible="false"
                        x:Name="lbl_longitude"
                        Text="{Binding Longitude}"
                        FontSize="12"></local:RoundedEntry>
                                <Label
                        x:Name="lbl_adress"
                        FontSize="8"></Label>


                            </StackLayout>



                        </StackLayout>

                        <!--pointInterestBt-->
                        <StackLayout x:Name="pointInterestStack" Grid.Row="1">
<Frame
            Grid.Row="2"
            Grid.RowSpan="8"
            Grid.ColumnSpan="12"
            HorizontalOptions="StartAndExpand"
            VerticalOptions="StartAndExpand"
            WidthRequest="300"
            Margin="10,10,0,0"
            IsVisible="{Binding poiCollectionPopupState}"
            BackgroundColor="White"
            Opacity=".9"
            x:Name="poiCollectionView">
            
            <StackLayout>
                <CollectionView
                    IsVisible="{Binding PoiCollectionVisible}"
                    Margin="0"
                    ItemsSource="{Binding PoiCollection}"
                    SelectionMode="Single"
                    SelectedItem="{Binding SelectedSinglePoi}"
                    SelectionChangedCommand="{Binding SelectedPoiCommand}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid
                                Padding="5"
                                HeightRequest="60"
                                RowDefinitions="1*,1*,1*">
                                <Label
                                    Grid.Row="0"
                                    Text="{Binding Name}"
                                    FontAttributes="Bold"
                                    CharacterSpacing=".5"
                                    FontSize="12"
                                    HeightRequest="100"></Label>
                                <Label
                                    Grid.Row="1"
                                    Text="{Binding Description}"
                                    FontSize="12"
                                    HeightRequest="100"></Label>
                                <Label
                                    Grid.Row="2"
                                    FontSize="12"
                                    FontAttributes="Italic"
                                    HeightRequest="100">
                                    <Label.Text>
                                        <MultiBinding
                                            StringFormat="{}{0}, {1}">
                                            <Binding
                                                Path="Address.Area" />
                                            <Binding
                                                Path="Address.Country" />
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Rectangle
                                    Grid.Row="2"
                                    HeightRequest="1"
                                    BackgroundColor="Black"
                                    VerticalOptions="End"
                                    HorizontalOptions="FillAndExpand" />
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
                
                <StackLayout
                    IsVisible="{Binding PoiSingleVisible}">
                    <local:CustomButton
                        Text="Return"
                        Command="{Binding SelectedPoiCommand}" />
                    <Label
                        FontSize="24"
                        Text="{Binding SelectedSinglePoi.Name}" />
                    <Label
                        FontSize="12"
                        Text="{Binding SelectedSinglePoi.Description}" />
                </StackLayout>
            </StackLayout>
        </Frame>
        

                        </StackLayout>

                        <!--placeHolderBt-->

                        <StackLayout x:Name="placeHolderStack" Grid.Row="2">
<Frame  
            Grid.Row="2"
            Grid.RowSpan="8"
            Grid.ColumnSpan="12"
            HorizontalOptions="StartAndExpand"
            VerticalOptions="StartAndExpand"
            WidthRequest="300"
            Margin="10,10,0,0"
            IsVisible="{Binding WeatherPopupState}"
            BackgroundColor="White"
            Opacity=".9"
            x:Name="weatherCollectionView">


            <CollectionView
                VerticalOptions="StartAndExpand"
                HorizontalOptions="Center"
                Margin="0"
                ItemsSource="{Binding ForecastCollection}"
                SelectionMode="Single"
                IsGrouped="True">
                <CollectionView.GroupHeaderTemplate>
                    <DataTemplate>
                        <Label Padding="2" 
                               Text="{Binding Key, StringFormat='{0:dddd, MMMM dd, yyyy}'}" 
                               FontSize="20"/>
                    </DataTemplate>
                </CollectionView.GroupHeaderTemplate>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid
                            Padding="5"
                            HeightRequest="100"
                            RowDefinitions="1*,1*,1*">
                            <Label
                                Grid.Row="0"
                                Text="{Binding DateTime, StringFormat='{0:HH:mm}'}"
                                FontSize="16"
                                HeightRequest="100"></Label>
                            <Label
                                Grid.Row="1"
                                FontAttributes="Bold"
                                FontSize="16"
                                HeightRequest="100"
                                Text="{Binding Temperature, StringFormat='{0}°C'}"
                                />
                            <Image
                                Grid.Row="1"
                                Source="{Binding IconUrl}"
                                HeightRequest="100"></Image>

                            <Label Grid.Row="2"
                                   FontSize="12"
                                   HeightRequest="100"
                                   Text="{Binding DescrAndWind}"/>


                            <!--<Rectangle Grid.Row="2"
                                HeightRequest="1"
                                BackgroundColor="Black"
                                VerticalOptions="End"
                                HorizontalOptions="FillAndExpand" />-->
                        </Grid>


                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Frame>

                        </StackLayout>
                    </Grid>
                    
                                                                    <!--End of Under NavbarPanel--> 
                    
                                                               
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </StackLayout>
                <Grid.GestureRecognizers>
                    <TapGestureRecognizer Tapped="SliderUpDown">
                    </TapGestureRecognizer>
                </Grid.GestureRecognizers>

            </Grid>
            <!--End SlidePanel-->

        </StackLayout>
    </AbsoluteLayout>
</ContentPage>
